import { Link } from 'gatsby';
import { nightOwl } from '@code-surfer/themes';
import { themes } from 'mdx-deck';
import { CodeSurfer, CodeSurferColumns, Step } from 'code-surfer';
import { CssBaseline } from '@material-ui/core';
import CustomButton from './samples/CustomButton';
import CustomButtonWithoutStylesheetName from './samples/CustomButtonWithoutStylesheetName';
import CustomButtonWithHover from './samples/CustomButtonWithHover';
import CustomButtonBasedOnProps from './samples/CustomButtonBasedOnProps';
import CustomButtonBasedOnProps2 from './samples/CustomButtonBasedOnProps2';
import CustomButtonDisabled1 from './samples/CustomButtonDisabled1';
import CustomTheme from './samples/CustomTheme';
import UsingTheme from './samples/UsingTheme';
import GlobalStyling from './samples/GlobalStyling';
import OverridingWithClassesProp from './samples/OverridingWithClassesProp';
import OverridingWithClassesProp2 from './samples/OverridingWithClassesProp2';

import DisabledDemo from './components/DisabledDemo';
import DefaultThemeDemo from './components/DefaultThemeDemo';

import './styles/overrides.css';
import './styles/styles.css';

export const theme = themes.notes;

<CssBaseline />

# Mui Styling

##### UI Meetup 18th Oct 2021

###### By Phani Rahul Sivalenka

---

Mui styling is powered by a CSS-in-JS solution available as

[@material-ui/styles](https://www.npmjs.com/package/@material-ui/styles) package, (built with JSS)

---

# Package

<div style={{ padding: '2em', paddingTop: 0, fontSize: '2.5rem' }}>

| @material-ui/styles                                         | @material-ui/core/styles                                                                                                                             |     |     |     |
| ----------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- | --- | --- | --- |
| Isolated solution.                                          | Re-exports @material-ui/styles as @material-ui/core/styles. So, no need of installing @material-ui/styles if @material-ui/core is already installed. |     |     |     |
| Doesnâ€™t have a default theme.                               | Default Mui theme is applied to re-exported modules of @material-ui/styles.                                                                          |     |     |     |
| Used to style React apps that are not using Mui components. | Used to style React apps that are using Mui components.                                                                                              |     |     |     |

</div>

---

# Basic Styling

---

Three ways to style

1. Hook API (we use)

   `import { makeStyles } from '@material-ui/core/styles';`

2. Styled Components API

   `import { styled } from '@material-ui/core/styles';`

3. Higher-order component API

   `import { withStyles } from '@material-ui/core/styles';`

---

<CodeSurferColumns themes={[nightOwl]}>

<Step title="Hook API - Basic Usage">

```jsx 2[1:19,29:56],4:19,22,24[18:41] file=./samples/CustomButton.js

```

<div style={{ padding: '1em' }}>

Basic usage:

- Create a styles hook using `makeStyles`.
- Use the hook inside a component/another hook and bind it to className prop of the components/elements.

</div>

</Step>

<Step title="Hook API - Basic Usage">

```diff 4[31:42],19

```

<div style={{ padding: '1em' }}>

`makeStyles` is a function which takes in two arguments

</div>

</Step>

<Step title="Hook API - Basic Usage">

```diff 5:15

```

<div style={{ padding: '1em' }}>

As first argument, we pass the styles we want to apply.

Here we pass the styles as an object with `root` as the style rule and the styles are assigned to it in the form of JS object.

Note the CSS property names are written in camelCase instead of the usual kebab-case that CSS uses.

</div>

</Step>

<Step title="Hook API - Basic Usage">

```diff 16:18

```

<div style={{ padding: '1em' }}>

Second argument is an object with certain [options](https://v4.mui.com/styles/api/#arguments-3) available for customization.

An important option that we make use of is:

`options.name` (String [optional]): The name of the style sheet. Useful for debugging.

<div style={{ fontSize: '1.25rem' }}>

Inspect below buttons to check the class names generated by the styles.

</div>

<CustomButtonWithoutStylesheetName>
  Without style sheet name
</CustomButtonWithoutStylesheetName>
{` `}
<CustomButton>With style sheet name</CustomButton>

</div>

</Step>

</CodeSurferColumns>

---

# Nesting Selectors

---

<CodeSurferColumns themes={[nightOwl]}>

<Step title="Nesting Selectors">

```jsx 16:20 file=./samples/CustomButtonWithHover.js

```

<div style={{ padding: '1em' }}>

We can use `&` to style any nested elements / pseudo elements / nested classes / pseudo classes.

<CustomButtonWithHover>Hover me!</CustomButtonWithHover>

</div>

</Step>

<Step title="Nesting Selectors">

```diff 16:32

```

<div style={{ padding: '1em' }}>

We can use `&` to style any nested elements / pseudo elements / nested classes / pseudo classes.

Let's see how the style rules are generated for each of these nestings.

<CustomButtonWithHover>Hover me!</CustomButtonWithHover>

</div>

</Step>

<Step title="Nesting Selectors">

```diff 6,16

```

<div style={{ padding: '1em' }}>

Style rule generated:

`CustomButton-root:hover {}`

<CustomButtonWithHover>Hover me!</CustomButtonWithHover>

</div>

</Step>

<Step title="Nesting Selectors">

```diff 6,22

```

<div style={{ padding: '1em' }}>

Style rule generated:

`CustomButton-root:before, CustomButton-root:after, CustomButton-root *::before, CustomButton-root *::after {}`

<CustomButtonWithHover>Hover me!</CustomButtonWithHover>

</div>

</Step>

<Step title="Nesting Selectors">

```diff 6,26

```

<div style={{ padding: '1em' }}>

Style rule generated:

`CustomButton-root.MuiButton-text {}`

<CustomButtonWithHover>Hover me!</CustomButtonWithHover>

</div>

</Step>

<Step title="Nesting Selectors">

```diff 6,30

```

<div style={{ padding: '1em' }}>

Style rule generated:

`CustomButton-root > span {}`

Basically the `&` is replaced by the class name generated for the style rule (`root` in this case) wrapping these nestings.

<CustomButtonWithHover>Hover me!</CustomButtonWithHover>

</div>

</Step>

</CodeSurferColumns>

---

# Adapting based on props

---

<CodeSurferColumns themes={[nightOwl]}>

<Step title="Adapting based on props">

```jsx 11,22[41:49] file=./samples/CustomButtonBasedOnProps.js

```

<div style={{ padding: '1em' }}>

We can pass a function instead of direct value to any CSS property. This function gets all the props passed to the hook call.

<CustomButtonBasedOnProps color="Brown">
  My Text Color is Brown
</CustomButtonBasedOnProps>

</div>

</Step>

<Step title="Adapting based on props">

```jsx 6,7,10,11,14,22[41:49] file=./samples/CustomButtonBasedOnProps2.js

```

<div style={{ padding: '1em' }}>

We can also pass the same function to any style rule.

This is useful when there are multiple CSS properties in a style rule that depend on props passed.

<CustomButtonBasedOnProps2 color="#A52A2A">
  My Text Color is darker shade of Brown (#A52A2A)
</CustomButtonBasedOnProps2>

</div>

</Step>

</CodeSurferColumns>

---

For a button we might want to add a disabled property based on which we have to style disabled state.

How would we implement this?

---

<CodeSurferColumns themes={[nightOwl]}>

<Step title="Adapting based on props">

```jsx 7:13,16:18,29[41:52] file=./samples/CustomButtonDisabled1.js

```

<div style={{ padding: '1em' }}>

One way is this.

<DisabledDemo />

If we inspect this, we will notice that Mui creates two classes starting with CustomButton-root. Removing one class will completely remove the background and color styling of the button. This is not good for debugging. Also readability of the code is compromised.

</div>

</Step>

</CodeSurferColumns>

---

How can we improve the debugging experience and readability of the code?

---

<CodeSurferColumns themes={[nightOwl]}>

<Step title="Adapting based on props">

```jsx 7,16:27 file=./samples/CustomButtonDisabled2.js

```

<div style={{ padding: '1em' }}>

<DisabledDemo betterImplementation />

We can use the nesting capability and `$` selection to define the disabled state...

</div>

</Step>

<Step title="Adapting based on props">

```diff 39:41

```

<div style={{ padding: '1em' }}>

<DisabledDemo betterImplementation />

...and use `clsx` library to apply the disabled class to the button conditionally along with root class.

This generates class names: `CustomButton-root` and `CustomButton-disabled` which can be toggled in dev tools to debug the styling.

</div>

</Step>

</CodeSurferColumns>

---

# Overriding Styles using `classes` prop

---

<CodeSurferColumns themes={[nightOwl]}>

<Step title="Overriding Styles using `classes` prop">

```jsx 2[22:30],6:10,21 file=./samples/OverridingWithClassesProp.js

```

<div style={{ padding: '1em' }}>

All Mui components allow overriding styles using `classes` prop.

<OverridingWithClassesProp />

</div>

</Step>

<Step title="Overriding Styles using `classes` prop">

```jsx 45 file=./samples/OverridingWithClassesProp2.js

```

<div style={{ padding: '1em' }}>

We can also using `classes` prop to override style rules of our custom components.

<OverridingWithClassesProp2 />

</div>

</Step>

<Step title="Overriding Styles using `classes` prop">

```diff 16

```

<div style={{ padding: '1em' }}>

We should pass along the classes prop to `useStyles` hook generated by `makeStyles` for the overrides to get applied.

<OverridingWithClassesProp2 />

</div>

</Step>

</CodeSurferColumns>

---

# Theming

---

The default theme provided by Mui when using style creation APIs from `@material-ui/core/styles` is as follows:

<DefaultThemeDemo />

---

<CodeSurferColumns themes={[nightOwl]}>

<Step title="Theming">

```jsx 2[18:28],6:16,27:31 file=./samples/CustomTheme.js

```

<div style={{ padding: '1em' }}>

We can create a custom theme using `createTheme` function from `@material-ui/core/styles` and provide it to a React component tree using `ThemeProvider`.

<CustomTheme />

</div>

</Step>

<Step title="Theming">

```diff 4:16,20,27,31,32

```

<div style={{ padding: '1em' }}>

It is also possible to nest `ThemeProvider`s if needed. We have to make sure there is a `ThemeProvider` at the root of the tree for the nesting to work.

<CustomTheme />

</div>

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns themes={[nightOwl]}>

<Step title="Using the theme: in makeStyles">

```jsx 5,7,8,10 file=./samples/UsingTheme.js

```

<div style={{ padding: '1em' }}>

`makeStyles`, in addition to accepting an object as a first parameter, it can also accept a function that returns an object. This function gets the theme passed to it.

<UsingTheme />

</div>

</Step>

</CodeSurferColumns>

---

# Global Styling

---

There are cases where we want to apply global styling to the entire application. For example, to modify the styles of a 3rd party library components other than Mui.

Before going to global styling let's see what `CssBaseline` is.

---

`CssBaseline` is a collection of HTML element and attribute style-normalizations that make browsers render all elements more consistently.

It modifies the following (<a href="https://v4.mui.com/components/css-baseline/#approach" target="_blank">more details</a>):

- `<html>` and `<body>` elements
- `box-sizing` of all elements
- sets the default typography to the elements

---

<CodeSurferColumns themes={[nightOwl]}>

<Step title="Theming">

```jsx 8:37 file=./samples/GlobalStyling.js

```

<div style={{ padding: '1em' }}>

We can add global styles using `@global` selector by overriding MuiCssBaseline component while creating the theme.

<GlobalStyling />

</div>

</Step>

<Step title="Theming">

```diff 42

```

<div style={{ padding: '1em' }}>

Make sure to add `CssBaseline` in the root of the tree for the global styles to apply.

<GlobalStyling />

</div>

</Step>

</CodeSurferColumns>

---

## Can't use the generated class names of custom styles to style globally...

---

...as the class names generated for our custom style rules have a number suffixed to them and keep changing on re-rendering of the application.

For example, the class name generated for our CustomButton can be `CustomButton-root-1` or `CustomButton-root-123`, etc.

<CustomButtonWithHover>My Button</CustomButtonWithHover>

This means that we can't use the class names directly in our global css file as we don't know what the suffixed number would be.

---

# Thank You
